<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RadQA</title>
  </head>
  <body>
    <div class="container">
      <div class="patient-info container-fluid"">

        <div class="text-center">
          <h1><a href="/visits/<%= @the_visit.id %>"><i class="fa-solid fa-arrow-left fa-2xs"></i></a>
            Medical Question Answering
          </h1>
        </div>

        <table class="table table-bordered">
          <thead>
            <tr>
              <th scope="col">Patient Id</th>
              <th scope="col">First Name</th>
              <th scope="col">Last Name</th>
              <th scope="col">Visit Speciality</th>
              <th scope="col">Visit Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td scope="col"><%= @the_patient.id%></td>
              <td scope="col"><%= @the_patient.first_name%></td>
              <td scope="col"><%= @the_patient.last_name%></td>
              <td scope="col"><%= @the_visit.medical_specialty%></td>
              <td scope="col"><%= @the_visit.description%></td>
            </tr>
          </tbody>
        </table>

        <div>
          <h5>Visit Notes:</h5>

          <p><%= @the_visit.transcription%></p>
        </div>

        <div class="qa-section container-fluid">
          <form action="/answer/<%= @the_visit.id %>">
            <div><label for="question">Question about patient</label></div>
            <textarea name="question" id="question" class="form-control"></textarea>
            <br>
            <button class="btn btn-primary float-end">Ask</button>
          </form>
        </div>
        <% unless @list_of_questions.blank? %>
          <div class="questions container-fluid pt-5">
            <h5 class="text-center">Previous Questions</h5>
            <% @list_of_questions.each_with_index do |question, index| %>
              <div class="container-fluid fw-medium">Question <%= index + 1 %>: <span class="fw-light"><%= question.question%></span></div>
              <div class="container-fluid fw-medium mb-2">Answer <%= index + 1 %>: <span class="fw-light"><%= question.answer%></span></div>
            <% end %>
          </div>
        <% end %>
      </div>
    </div>
  </body>
</html>
